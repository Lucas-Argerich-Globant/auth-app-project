<form class="flex flex-col gap-4" [formGroup]="registerForm" (submit)="onSubmit()">
  @switch (formStep()) { @case ('name'){
  <fieldset class="flex flex-col gap-4 w-full">
    <app-input
      name="firstName"
      label="Nombre"
      type="text"
      placeholder="Ingrese su nombre"
      [control]="getControl('name.first')"
      class="shrink"
    />
    <app-input
      name="middleName"
      label="Segundo Nombre"
      type="text"
      placeholder="Ingrese su segundo nombre (opcional)"
      [control]="getControl('name.middle')"
      class="shrink"
    />
    <app-input
      name="lastName"
      label="Apellido"
      type="text"
      placeholder="Ingrese su apellido"
      [control]="getControl('name.last')"
      class="shrink"
    />
    <div class="flex gap-2 mt-8">
      <button
        class="flex-1 bg-white text-slate-800 border border-slate-800 py-2 px-4 rounded not-disabled:cursor-pointer transition-colors"
        type="button"
        [disabled]="isSubmitting()"
        (click)="navigateToLogin()"
      >
        Volver
      </button>
      <button
        class="flex-1 bg-slate-800 disabled:bg-slate-200 text-white py-2 px-4 rounded not-disabled:cursor-pointer hover:not-disabled:bg-slate-900 transition-colors"
        type="button"
        [disabled]="registerForm.controls.name.invalid || isSubmitting()"
        (click)="goToStep('credentials')"
      >
        Continuar
      </button>
    </div>
  </fieldset>
  } @case ('credentials') {
  <fieldset class="flex flex-col gap-4 w-full">
    <app-input
      name="email"
      label="Email"
      type="email"
      placeholder="Ingrese su correo"
      [control]="getControl('email')"
    />
    <app-input
      name="password"
      label="Contrase単a"
      type="password"
      placeholder="Ingrese una contrase単a"
      [control]="getControl('password')"
    />
    <app-input
      name="repeatPassword"
      label="Repetir Contrase単a"
      type="password"
      placeholder="Repita su contrase単a"
      [control]="getControl('repeatPassword')"
    />
    @if (errorMessage()) {
    <div class="flex items-center mt-1">
      <span
        class="inline-flex h-4 w-4 items-center justify-center rounded-full border border-slate-800 text-[10px] font-bold text-slate-800"
      >
        !
      </span>
      <span class="text-slate-900 text-sm font-medium px-1">{{ errorMessage() }}</span>
    </div>
    }
    <button
      class="bg-slate-800 disabled:bg-slate-200 text-white py-2 px-4 rounded not-disabled:cursor-pointer hover:not-disabled:bg-slate-900 transition-colors"
      type="submit"
      [disabled]="registerForm.invalid || isSubmitting()"
    >
      Registrarse
    </button>
  </fieldset>
  } }
</form>
